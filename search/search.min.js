function initSearch(){getParameterByName("q")&&(q=decodeURIComponent(getParameterByName("q")),$searchInput.val(q),execSearch(q));$(document).on("submit",$searchForm,function(n){n.preventDefault();modURLParam(window.location.href,"q",q);q=$searchInput.val();execSearch(q)})}function updateUrlParameter(n,t,i){var r=n.indexOf("#"),e=r===-1?"":n.substr(r),u,f;return n=r===-1?n:n.substr(0,r),u=new RegExp("([?&])"+t+"=.*?(&|$)","i"),f=n.indexOf("?")!==-1?"&":"?",n=n.match(u)?n.replace(u,"$1"+t+"="+i+"$2"):n+f+t+"="+i,n+e}function execSearch(n){(n!=""||allowEmpty)&&(showLoader&&toggleLoadingClass(),getSearchResults(processData()))}function toggleLoadingClass(){}function getSearchResults(n){$.get(jsonFeedUrl,n,"json")}function processData(){return $results=[],function(n){var t=0,i="";$.each(n,function(n,r){if(r.seach_omit!="true"&&(r.content.toLowerCase().indexOf(q.toLowerCase())>-1||r.title.toLowerCase().indexOf(q.toLowerCase())>-1)){var u=populateResultContent($resultTemplate.html(),r);t++;i+=u}});showLoader&&toggleLoadingClass();populateResultsString(t);showSearchResults(i)}}function showSearchResults(n){$resultsPlaceholder.html(n)}function formatDate(n){var n=new Date,t=n.getDate(),i=n.getMonth(),r=n.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+r}function populateResultContent(n,t){return t.lang=="ar"&&(n=injectContent(n,"rtl","##CssClass##")),n=injectContent(n,t.title,"##Title##"),n=injectContent(n,t.link,"##Url##"),n=injectContent(n,t.excerpt,"##Excerpt##"),injectContent(n,formatDate(t.date),"##Date##")}function populateResultsString(n){$foundTerm.text(q);$foundCount.text(n);$foundContainer.show()}function getParameterByName(n){var t=RegExp("[?&]"+n+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function injectContent(n,t,i){var r=new RegExp(i,"g");return n.replace(r,t)}var q,jsonFeedUrl="/search/feed.json",$searchForm=$("[data-search-form]"),$searchInput=$("[data-search-input]"),$resultTemplate=$("#search-result"),$resultsPlaceholder=$("[data-search-results]"),$loading=$("[loading]"),$foundContainer=$("[data-search-found]"),$foundTerm=$("[data-search-found-term]"),$foundCount=$("[data-search-found-count]"),allowEmpty=!0,showLoader=!0,loadingClass="loadingSpinner";$(document).ready(function(){$foundContainer.hide();initSearch()}),function(n,t,i,r){modURLParam=function(u,f,e){e=e!=r?encodeURIComponent(e).replace(t,"+"):e;var o=new RegExp("([?&]"+f.replace(n,"\\$1")+"=)[^&]*");return o.test(u)?u.replace(o,function(n,t){return e!=r?t+e:""}).replace(i,"$1?"):e!=r?u+(u.indexOf("?")+1?"&":"?")+f+"="+e:u}}(/([\\\/\[\]{}().*+?|^$])/g,/%20/g,/^([^?]+)&/);