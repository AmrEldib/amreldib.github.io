<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  ﻿<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>
        
        Amr &middot; 
        
    </title>
    <!-- CSS -->
    <link rel="stylesheet" href="/public/css/poole.css">
    <link rel="stylesheet" href="/public/css/syntax.css">
    <link rel="stylesheet" href="/public/css/hyde.css">
    <link rel="stylesheet" href="/public/css/rjow.css">
    <link rel="stylesheet" href="/public/css/amr.css">
    <link rel="stylesheet" href="/public/css/gist.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
    <!-- Icons -->
    <link rel="shortcut icon" href="/public/images/favicon.ico">
    <!-- For Chrome for Android: -->
    <link rel="icon" sizes="192x192" href="/public/images/AmrAvatar192.png">
    <!-- For iPhone 6 Plus with @3× display: -->
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/public/images/AmrAvatar180.png">
    <!-- For iPad with @2× display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/public/images/AmrAvatar152.png">
    <!-- For iPad with @2× display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/images/AmrAvatar144.png">
    <!-- For iPhone with @2× display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/public/images/AmrAvatar120.png">
    <!-- For iPhone with @2× display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/public/images/AmrAvatar114.png">
    <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/public/images/AmrAvatar76.png">
    <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/public/images/AmrAvatar72.png">
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: 57×57px -->
    <link rel="apple-touch-icon-precomposed" href="/public/images/AmrAvatar57.png">
    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-jekyll">

    <div class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <div class="flip-container" ontouchstart="this.classList.toggle('hover');">
                <div class="flipper">
                    <div class="front">
                        <div><img class="profilePic" src="/public/images/AmrAvatar.png" /></div>
                    </div>
                    <div class="back">
                        <div><img class="profilePic" src="/public/images/Amr.png" /></div>
                    </div>
                </div>
            </div>
            <br/>
            <small><i>Hi, My name is</i></small>
            <h1>
                <a class="blogTitle" href="/">
                    Amr
                </a>
            </h1>
            <small><i>and this is my</i></small>
            <p class="lead">Blog and personal website
</p>
        </div>
        <nav class="sidebar-nav">
            <a class="sidebar-nav-item" href="/">Home</a>
            

            
            
                
                    
                
            
                
                    
                    <a class="sidebar-nav-item" href="/about.html">About</a>
                    
                
            
                
            
                
            
                
                    
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            

            <br/>

            <a class="sidebar-nav-item side-nav-icon" 
               href="https://twitter.com/AmrEldib">
                <img class="side-nav-icon"
                     src="/public/images/twitter-24.png"
                     alt="@AmrEldib" />
            </a>
            <a class="sidebar-nav-item side-nav-icon" 
               href="https://github.com/AmrEldib">
                <img class="side-nav-icon"
                     src="/public/images/github-24.png"
                     alt="GitHub Page" />
            </a>
            <a class="sidebar-nav-item side-nav-icon" 
               href="http://www.goodreads.com/AmrEldib">
                <img class="side-nav-icon"
                     src="/public/images/goodreads-24.png"
                     alt="Goodreads Shelf" />
            </a>
            <a class="sidebar-nav-item side-nav-icon"
               href="https://www.linkedin.com/in/AmrEldib">
                <img class="side-nav-icon"
                     src="/public/images/linked-24.png"
                     alt="LinkedIn Resume" />
            </a>
            <a class="sidebar-nav-item side-nav-icon" 
               href="http://feeds.feedburner.com/AmrEldib">
                <img class="side-nav-icon"
                     src="/public/images/rss-24.png"
                     alt="Subscribe via RSS" />
            </a>
        </nav>
        <p><small>&copy; 2014. All rights reserved.</small></p>
    </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/EverybodyGetsAnAppStore">
        Everybody Gets an App Store
      </a>
    </h1>

    <span class="post-date">10 Jan 2011</span>

    <p>When I hear all the news about all the new app stores for the big three (Apple, Google and Microsoft), all I can think of is Opera giving away cars to her audience. “You get a Car, You get a Car, You get a Car. Every …body … gets … a … Car”. Here’s a video with a Remix.
&lt;div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:dee28f70-e16b-47fa-9ca1-7f573c81bea1" class="wlWriterEditableSmartContent"&gt;&lt;div id="30163a6f-a6f8-4f4b-a1ac-977ac04a02d1" style="margin: 0px; padding: 0px; display: inline;"&gt;&lt;div&gt;<a href="http://www.youtube.com/watch?v=XcI-rHO0yko&amp;feature=related"><img src="http://lh3.ggpht.com/_QnwET5uCdXI/TSvdxlSxXmI/AAAAAAAAAH8/S_ALHVmWTFM/videofd2740d28cc6%5B172%5D.jpg?imgmax=800" alt="" /></a>&lt;/div&gt;&lt;/div&gt;&lt;div style="width:507px;clear:both;font-size:.8em"&gt;Everybody gets a Car from Opera&lt;/div&gt;&lt;/div&gt;</p>

<p>Of course, giant platform-developing software companies don’t really need cars, it seems like they’re making up for it with App Stores.</p>

<p>iPhone has an <a href="http://www.apple.com/iphone/apps-for-iphone/">App Store</a>, so Windows Mobile got a Marketplace. Google Chrome got a <a href="https://chrome.google.com/webstore">Chrome Web Store</a> (this one – in particular – I’ll get to in a minute). On Thursday Jan. 6, Apple launched the <a href="http://www.apple.com/mac/app-store/">Mac App Store</a>. Microsoft built a <a href="http://www.microsoft.com/windowsphone/en-us/apps/default.aspx">Marketplace for Windows Phone 7</a> and is <a href="http://www.winsupersite.com/article/paul-thurrotts-wininfo/New-Tile-Based-Shell-App-Model-and-App-Store-Coming-in-Windows-8-.aspx">rumored to create an App Store for Windows 8</a>.</p>

<p>I can easily see the benefits of having an App Store. For beginner users, it makes it very easy to find, install and maintain applications. Also, I can easily see app stores be a big success. An obvious example is the iPhone App Store, <a href="http://en.wikipedia.org/wiki/App_Store#Number_of_launched_applications">300,000+ apps with 7,000,000,000+ downloads</a>.</p>

<p>This, of course, comes with a cost. Mostly paid by the app developers, not by the store owner. For example, Apple takes away 30% off the payment for all downloads through the app store. It’s the software equivalent of taxes. Beyond hosting your app, its updates, and including it in the search results, I’m not sure what the cost is for.</p>

<p>Then comes the Guidelines. For you to include any app to Apple’s app store (iPhone or Mac), your app have go through an approval process where you submit it to Apple where it would be reviewed and either accepted or rejected. Apple provides feedback on the reason why your app was rejected. Developers had different experience with the review process over time. In Sept. 2010, Apple released official guidelines for the review process which seems like a no brainer for such a process but somehow was delayed all this time.</p>

<p>Just like GUI (with Macintosh), and cell phones (with the iPhone), with the app review process, Apple has revolutionized Censorship. Somehow, Apple managed to make censorship cool. Look at it, unshaved, with a black turtleneck, it’s so cool and we all have to abide by it.</p>

<p>But nothing fascinates me more than <a href="https://chrome.google.com/webstore">Chrome Web Store</a>. Wait, don’t click the link, you have to install Chrome browser first to be able to “install” any of the “apps” (wink wink). I have to say, it’s an admirable effort by Google to put together – by far – the most fancy bookmark collection I have ever seen.</p>

<p>How bad is the Chrome Web Store. The <a href="https://chrome.google.com/webstore/detail/blpcfgokakmgnkcojhhkbfbldkacnbeo">YouTube app</a> of the <a href="http://www.youtube.com/">YouTube website</a>, which is the largest video-sharing website, a <a href="http://en.wikinews.org/wiki/Google_purchases_YouTube_for_$1.65_billion">$1.65 billion</a> valued website that got its own <a href="http://en.wikipedia.org/wiki/CNN-YouTube_presidential_debates">presidential debates</a>. Yes, that YouTube got only 3 out of 5 stars on Chrome web store and one of the comments says it all “Nice link”.</p>

<p>Microsoft, as usual, late but eventually better decided to have its own App Store. Not only for the newly released Windows Phone 7, but also for Windows. Of course, they call it “Marketplace” because if they call it App Store, we might think it’s the exact same thing as Apple’s.</p>

<p>In the case of smart phones, since their beginning they had app stores and people got used to the idea of installing all their apps through the app store. Users have nothing to compare it to. Developers never tried to go outside the guidelines because what’s the point of developing an app that you know will be rejected by the only distribution channel available. It’s a loss that developers’ innovation be restricted like this under the banner of consistent user experience and application stability.</p>

<p>In the case of desktops, users do have something to compare app stores to. Developers have always worked with no guidelines to restrict what they can do with applications. Yes, this has caused applications like viruses, Trojans, and key loggers to be developed. But, these are a tiny fraction of all the applications that were developed and we can’t live without today.</p>

<p><a href="http://downloadsquad.switched.com/2011/01/08/vlc-for-iphone-and-ipad-get-pulled-from-the-app-store/">Apple has pulled VLC from its App Store</a>. VLC is an application that is essential to any computer that plays video. So when it gets pulled or rejected, it will get it’s own post on all tech blogs. But what about Joe Developer who develops the next killer app. His application won’t get a blog post when it gets rejected because Joe didn’t exactly follow the guidelines of the app store, and Joe doesn’t have a way of distributing this application other than the app store. Even if he does manage to find another distribution channel, it won’t get him the visibility of being on the vendor’s app store.</p>

<p>App Store Can’t be Walled Gardens. They don’t need just to have <a href="http://wmpoweruser.com/windows-phone-7-marketplace-search-updated/">better search</a>, or <a href="http://gizmodo.com/5403986/itunes-enters-the-web-browser-with-itunes-preview">access through a browser</a>. They need to be Open. Open to developers with no ridiculous sign up fees, or commission on every download. Open with no guidelines that <a href="http://developer.apple.com/appstore/guidelines.html">require me to sign up just to read it</a>. App stores can implement a system of recommendation where you can “Strongly Oppose” the apps you don’t like but don’t make a choice for me as a user.</p>

<p>If the purpose of App Stores is to offer a central point for distributing software to users, then let’s make that. But if the purpose is to make a new revenue generator, and turn platforms and its applications into a software that runs extensions and addons, then we all, developers and users, are screwed.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/DontHateMyCode">
        Don't Hate My Code
      </a>
    </h1>

    <span class="post-date">29 Sep 2010</span>

    <p>One very common problem that occurs when a new team takes over an existing project is their desire to “just move some stuff around”. That’s a code word for “I can’t believe that you’re calling this crap a software application” :D. This, of course, varies from one project to the other. Sometimes it’s justified and is for good reasons and other times it’s not. The reason is not the desire of the new team to make a quick impact (although sometimes that’s the case “You know, we had to fix a lot of stuff behind the scene”). But most of the time the reason is derived from the simple fact that reading code is much harder than writing it.  &lt;p align="justify"&gt;A programming language, like any other language, just because you know all the letters and all the words doesn’t mean you can parse the intended meaning. A code block, in its own way, is written to convey a certain intent to computers as their primary audience but also to other developers as a secondary audience. Some programming languages don’t care about developers and just target computers, like <a href="http://en.wikipedia.org/wiki/Assembly_language">Assembly Language</a>.  &lt;p align="justify"&gt;The problem with new teams is that they never think that one day they, too, would be the “old team”. The way to really solve this problem (having to rewrite/re-organize/restructure the codebase) is to write code in a clear enough way that anyone can understand it. Then, one day this will be common enough that you’ll understand what you are getting as anyone would understand what you are giving (Day dreaming?) (actually, on second thought, I’ll remove the question mark).  &lt;p align="justify"&gt;The point is: <em>Don’t just write “good code”, write “readable good code”.</em> &lt;p align="justify"&gt;However, modifying your code to be more readable is burdening your code with a responsibility that it shouldn’t have. When you read the part above about conveying intent, you’ll notice that the whole point of making the code readable is to give the reader an insight into my thought process. How did I arrive to the decision of structuring the code like that?  &lt;p align="justify"&gt;Code is not easy to read because it’s not in sequence, you don’t know where to start and where to end and you can’t read one part of it and figure out the rest.  &lt;p align="justify"&gt;
    My code has to come with that insight into my thought process. Here’s what I would do (and what I do do) to make this happen:</p>

<pre><code>##### Write in Bullet Points &lt;p align="justify"&gt;
Programmers don't want to read a long story. They want simple concise quick-to-read scannable sorted items that are not affected by how bad my morning coffee was.

I’m not specifying what type of document. This goes for all documents.

##### Use XML Documentation

You know, the [little green XML tags](http://msdn.microsoft.com/en-us/library/b2s063f7%28v=VS.100%29.aspx) before each member. .NET developers would know those. My summary for the "DoSomething" method used to be "Does something". I stopped doing that when I read this description on somebody else’s code. Now, I take a moment and describe what is the "Something", what do I mean by "Do", what kind of output does the method deliver and what impact it has on the system, what assumptions it requires. Take a moment to think. Always take a moment.

##### Write Comments First

Comments for code that has been already written tend to describe what the code does. “Loop through list until find target value” instead of “Find target value in list”. Changes to how the objective is achieved would impact the description even though the objective didn’t change. If I removed the loop and used a method to find the target value, I wouldn’t have to change “Find target value in list”.

Writing comments before code aims at outlining what is the objective of this method (or a code block within the method) and what are the logical steps and the possible scenarios that the method handles. Think of it this way, you’re a senior developer who doesn’t write code anymore but helps junior developers write the code. Use the comments to outline how the juniors will reach their goal, think in big picture (big as in the objective of the method and class). Don’t care about how you’re reading the text file, think about what do you want to do with the content of the file after it’s read. Later, you’ll go to the junior developer role and think about the optimum way to read a text file. This is done in iterations, feedback from the junior could affect the outline set by the senior who made assumptions about how this would work. Some changes have to be made to the outline to accommodate that.

Eventually, the comments would describe the steps that the method goes through to reach its goal. Reading code would add more details about the specific technical implementation while reading the comments would only give you a summary.

##### It’s Not Personal, It’s Technical

Don’t include details about people, events, dates, timeline, or progress in the project documents. Keep those items separate in their own documents. These “Team Documents” are for temporary consumption mainly by management, sometimes they’re useful for historical record but they don’t matter for new teams who just wants to read the code.

##### Use Meaningful Names with Standard Naming Convention

Use “i” for counter and “x” for quick math operations. Beyond that, use meaningful names that helps the reader keep track of the code flow.

Use standard naming convention to name and write the names of different members. I use the naming conventions of the [Framework Design Guidelines](http://www.amazon.com/Framework-Design-Guidelines-Conventions-Libraries/dp/0321545613).

As a standard rule, pet names doesn’t count as meaningful names, unless you pet is named “UserAccountID”.

##### Make It Part of the Process. Use Documents to Make Decisions

Some developers look at documentation as “I’ll get to it if/when I have time”. Not only that they never have time, but also they’re missing the point of why they should use documents in the first place. I use documents to collaborate with team members on making decisions about the different possible solutions of a specific problem. I use documents to define, scope, list possible solutions and their upsides and downsides and eventually choose the solution.

Communicating technical details through documents is much easier than through discussions which tends to easily stray away from the main topic, include a lot of not-fully-thought ideas, and require real time interaction (meetings which are difficult for remote teams and time consuming for… what’s the word for non-remote teams).

##### Keep Documents Updated

If you’re like me, and you use documents as an intro to writing code. It’s important to keep documents updated with the changes you made later to the code you wrote earlier.

##### Use a Tool

Using a tool like a [SharePoint](http://sharepoint.microsoft.com/en-us/Pages/default.aspx) document library or a [Wiki](http://en.wikipedia.org/wiki/Wiki) (I like [Screwturn](http://www.screwturn.eu/)) would encourage developers to participate in this addition to their daily tasks. It wouldn’t be just a collection of documents stored in some folder. It would be an essential part of the daily work.

##### Keep Versions. Don’t Throw Anything Away

Using a tool helps you keep versions of the documents. This lets you review the progress of each document and makes you able to go back to earlier solutions that you dismissed earlier but could be viable now.

##### Know When to Stop

Keep documents updated, make it part of the process, keep versions, write comments, bla bla bla. Remember that you’re getting paid to write code and create software. Using documents to build software can be really helpful but it’s not building software. Put a ceiling on how many documents and how much details you’re producing and make it supplemental to writing code. If it’s not going to lead to better code, don’t do it. Eventually you’ll find the balance the fits your process.
</code></pre>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/VMBasedDevelopmentEnvironment">
        VM-based Development Environment
      </a>
    </h1>

    <span class="post-date">15 Aug 2010</span>

    <p><img src="http://tcglkg.blu.livefilestore.com/y1pDV1HHKQTRsCo0eVj0C8rG5GZKJL3q5JGSgvXgp8pHDUyKM6fn_-qqvNV3488okfBVyUYftUbAgdbhP-fCh84lDSnrleQeXxF/VirtualBox.png?psid=1" alt="" /><img src="http://public.blu.livefilestore.com/y1pV7Xk3S8Ndl7Ey04VzVu6iXSOerQaFQ0dTeC7bo8Mc4gcaIyjPbBLFzO8NrB-L4wa7mICKgBm7eIg9CxXnyt3kw/VMware.png?psid=1" alt="" />I love VMs. To have a sandbox inside which there’s an operating system of your choice where you can try anything and not fear its effect on your host machine, that is empowering.</p>

<p> </p>

<p>I started using VMs a long time ago, but recently I moved to what I call a “VM-based Development Environment”. As a GIS developer, I have a problem which is that <a href="http://www.esri.com/products/index.html#desktop_gis_panel">ArcGIS</a> (the main GIS application/platform I’m using) doesn’t allow for side-by-side installation. So, if you want to install version 9.3.1, you have to uninstall version 9.3. And those are two different versions against which you have to develop and test your code.</p>

<p>Over the years, I had a simple solution. Pick a version that I mostly work with and install on my development machine. If I’m moving to a new project that needs a different version, I would uninstall the version I’m using and install the new one. This is, aside from being painful and inefficient, an outdated solution and it created another problem that I found out about at the end of one project I was working on.</p>

<p>Because my personal machine was updated and I install all these kinds of applications with their requirements, there was a software requirement I didn’t add to the installation package and that caused a problem on one client’s machine.</p>

<p>When I started using VMs, I moved the secondary versions of ArcGIS (the ones other than the version I’m mainly using) to VMs. Also, VMs helped with testing, especially when testing installation packages using snapshots (I’ll talk about that later). However, when I faced the missing requirement problem, I decided to take VMs a step further.</p>

<p>I’m using my machine for my personal software (Browser, Outlook, Office, Video, Music, Social Media, etc), and removed all development-related software (including ArcGIS) to a Virtual Machine. So when I work on code, I turn on a VM and start coding on a machine that has the least number of software installed.</p>

<h3 id="ups">Ups</h3>

<p>Moving all development work to a VM offer number of advantages:</p>

<ul>
  <li>
    <div align="justify">To quote a development concept “Separation of Concerns”. you can have a different VM for each project if you want, if the development software is different for each project, the operating system your team is using is different, or even you just want a different mode for each project.</div>
    <ul>
      <li>
        <div align="justify">Clean-slate machine can help you easily identify the requirements of your code and detect the software it might conflict with.</div>
        <ul>
          <li>
            <div align="justify">Working on Client-Server project where you want to deploy to a server and develop or test in a environment similar to the production environment.</div>
            <ul>
              <li>
                <div align="justify">Create a VM and pass to other team members and you’ve got yourself a unified development environment for all team members.</div>
                <ul>
                  <li>
                    <div align="justify">You can expand on the concept and create other VMs that can help with tasks related to development like a source code server, continuous integration server, etc.</div>
                    <ul>
                      <li>
                        <div align="justify">If you want to upgrade or re-install Windows on your host machine or even moved across the country to a whole new machine, copy few files and you still have your development environment intact.</div>
                        <ul>
                          <li>
                            <div align="justify">Distracted by all the e-mails, IMs, and tweets, just click “Full Screen” and you can easily shut all the annoyance on your host machine.</div>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="tips">Tips</h3>

<p>Building a VM is not that difficult but if you’re going to create number of VMs, few if not tens, maybe I can help with some tips:</p>

<ul>
  <li>
    <div align="justify">**Categorize Your Machines**: I have 4 classes of VMs:</div>
  </li>
  <li>
    <div align="justify">**Base**: a building block I use to install all other VMs. It’s an installed and updated OS with the very basic applications (Browser, Anti-virus, etc) that makes it very easy to install a new VM within minutes. You can also have a base for specific environments like Visual Studio 2008 or 2010.</div>
    <ul>
      <li>
        <div align="justify">**Dev**: a machine for development. I Turn it on and start banging on the keyboard like a monkey :)</div>
        <ul>
          <li>
            <div align="justify">**Lab**: I use those for testing. It’s important to have different operating system with all variations (x86 and x64 for example).</div>
            <ul>
              <li>
                <div align="justify">**Sandbox**: want to try something that you’re not sure is completely safe? want to try a trial product that you could remove later but could leave all these bits of crap behind? Use a sandbox.</div>
                <ul>
                  <li>
                    <div align="justify">**Come Up with a Naming Convention**: I usually name a VM with a meaningful name that easily explain its configurations, like this</div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>VMClass-OS-InstructionSet-VisualStudioVersion</p>

<p>for example:</p>

<p>Dev-7-x64-10</p>

<p>is a development machine with Windows 7 x64 and Visual Studio 2010</p>

<ul>
  <li>
    <div align="justify">**Use Memorable Names**: in addition to the naming convention, I give memorable names to the machines I use most frequently. It also helps if those names represent the different classes. For example, I give cities names to Dev machines (Cairo, Phoenix, Jakarta, etc), and I give names of the [periodic table](http://en.wikipedia.org/wiki/Periodic_table) elements to Lab machines (Neon, Cobalt, Titanium, etc).</div>
    <ul>
      <li>
        <div align="justify">**Understand Your Virtualization Software**: whether you’re using [VMware Desktop](http://www.vmware.com/), [Microsoft Virtual PC](http://www.microsoft.com/windows/virtual-pc/), or [VirtualBox](http://www.virtualbox.org/). Make sure to fully understand the capabilities of the software, otherwise you could be missing out on some features that could help you.</div>
        <ul>
          <li>
            <div align="justify">**Use Snapshots**: one feature that VMs offer that host machines doesn’t very well is ‘Snapshots’. Snapshots helps you save the state of a machine and easily return to it with a click of a button. It’s like Windows’ Restore Point or Mac’s Time Machine but much much faster. You can also have a tree of snapshots.</div>
            <ul>
              <li>
                <div align="justify">**Create a CodeBox**: To share code between different machines, either create a separate virtual hard drive and store all your data on it or create a shared folder on your host machine and map it as a network drive. I use the first choice because it’s easier to backup (just copy a few files), and avoid a potential security problem of having a shared folder. Be aware of the fine differences of creating a virtual hard drive between different virtualization software and make sure that virtual hard drive persistence doesn’t depend on VM persistence </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="downs">Downs</h3>

<p>Using VMs as your main development environment isn’t hassle-free and it does have its own disadvantages:</p>

<ul>
  <li>
    <div align="justify">**Memory Monster**: VMs require that you allocate full memory capacity to them once they’re on. So, you better throw away that 3-years old 2GB laptop. If you want to use VMs, you must have at least 4GB RAM. You’re gonna be using a VM for development which means longer hours where you can’t tolerate using a 1GB RAM machine. Do you? :). With 4GB you can have 2GB for your host and 2GB for the VM but you’ll miss out on the benefits of running another VM. Upgrade to 8GB to get full power.</div>
    <ul>
      <li>
        <div align="justify">**Code Not at Your Fingertips**: If no Visual Studio installed on your host machine, you have to turn on (or de-hibernate) a VM to get to your code. That takes about just a minute but it’s still something.</div>
        <ul>
          <li>
            <div align="justify">**Maintenance, Maintenance, Maintenance**: all these VMs require taking care of. Updating Windows, anti-virus, and applications is a headache because it’s not fully automated. Mainly I focus on the few machines I’m using, but once a month, I start all Base machines to keep them updated.</div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><a href="http://public.blu.livefilestore.com/y1pvAXtVd0Lmuip0zcei1bHrDJFK9Nc0Oo3eFQlTa3wPilb9rNHQB9oeVDxoXKmsh-Y6rEQYZhZdEaSyvgXX8lYqQ/TwoUpdateWindows.png?psid=1"><img src="http://tcglkg.blu.livefilestore.com/y1pTnMClwm_NKSn93D_A9y1lafQWu2Dexbi3LOtKalQrlHA_8n3ZMlelYui4w26zX7vyzKMAGZRPciLrdQbVZcqZAcx63IYiiit/TwoUpdateWindowsSmall.png?psid=1" alt="" /></a></p>

<p><em>Two Update Windows, one for a VM and the other for my host machine.</em></p>

<ul>
  <li>
    <div align="justify">**Gigabytes to Spare**: you should have a lot of those because a plain simple Windows 7 machine with no software uses about 12GB of hard drive space.</div>
  </li>
</ul>

<p>I’ve used VMs for development for quite a while now, and I feel that it improved how I work. Give it a try a let me know if it helped.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/ConfiguringLog4netPart2">
        Configuring log4net and Using the AppLogger Class - Part 2
      </a>
    </h1>

    <span class="post-date">24 Jul 2010</span>

    <p><em>Read the <a href="http://www.amreldib.com/2010/07/configuring-log4net-and-using-applogger.html">Part 1</a> for an intro to this post.</em></p>

<p>The AppLogger class is a class I use to encapsulate log4net and make easy to use. By “ease of use” I mean less lines for me to write to start logging. But, this ease of use comes on the expense of customizability. The AppLogger class is not built to fit your (or all) needs necessarily but with little work it can.</p>

<p>AppLogger contains my preferred configurations for both debug and release builds, and it embeds the XML configurations into the output assembly, while reducing the number of lines I need to write to initiate logging.</p>

<p>I’ve uploaded a copy of the project (VS2008 project) containing the class to my SkyDrive. You can find it <a href="http://cid-a0f4e46186f7cce4.office.live.com/self.aspx/Public/Blog/AppLogger/AppLoggerClass.7z">here</a> (To decompress the project files, use <a href="http://www.7-zip.org/">7zip</a>).</p>

<p>Normally, you would add AppLogger and the XML configuration files to your project and include it under the namespace you’re using. This way you would avoid adding another assembly to your project. For the purpose of distributing the code, I created a separate project and a separate namespace. Also, the project is using .NET framework 2.0, but it should work fine on any later version.</p>

<p>Let’s check out the project files</p>

<p><img src="http://tcglkg.blu.livefilestore.com/y1pgc-cSCu4HjMdpiqlk9aZXdeM2tsTs6LRD9sS0DtGhJxKu-KOfAzfv5AQJsgr7GhiTLrzrfqk2BNVOTGPLqLTpWQOgzCnF7oL/AppLogger-ProjectFiles.png?psid=1" alt="" /></p>

<p>The <strong>LoggerInitializationException</strong> is a fancy way of throwing an exception, it doesn’t really hold any more information than a regular exception but you can modify it to do just that.</p>

<p>The files <strong>Log4netDebugConfigurations</strong> &amp; <strong>Log4netReleaseConfigurations</strong> in the <strong>Resources</strong> folder are used to configure log4net in the Debug and Release build configurations. In this example, they have the same configurations.</p>

<p>The configurations use a <a href="http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html">Rolling File Appender</a> which writes to file until the file reaches a certain size (1MB in this case), then it renames the file by adding a number and write to a new file with the name you chose.</p>

<p>The pattern used in the configurations for each line in the log is
&lt;pre class="code"&gt;<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">&lt;</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(163, 21, 21);">conversionPattern </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:red;">value</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">=</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">’</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">* %date – [%thread] – %-5level
– %logger – %message%newline</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">’ </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">/&gt;</span>&lt;/pre&gt;It adds the <strong>date/time stamp</strong>, <strong>thread</strong>, <strong>level</strong> (Debug, Info, Warn, Error, Fatal), name of the <strong>logger</strong>, and <strong>message</strong>.</p>

<p>You can notice in the configuration file that the file name is not specified.
&lt;pre class="code"&gt;<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">&lt;</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(163, 21, 21);">file </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:red;">value</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">=</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">”</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">==LOG_FILE_PATH==</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">” </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">/&gt;</span>&lt;/pre&gt;This is intentioned as we’ll replace it at runtime.
AppLogger is written so that you can log using just one line of code without any preparations, like this:
&lt;pre class="code"&gt;<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Logger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Debug</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(255, 255, 230);">“This is a message.”</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);</span>&lt;/pre&gt;The <strong>Logger</strong> property is a static property that holds an <strong>AppLogger</strong> object and it doesn’t need to be set. If you are calling the property for the first time, it will create a new <strong>AppLogger</strong> object and return it to the calling method.</p>

<pre class="code"><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">public static </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Logger
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">{
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">get
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">{
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// if logger is null, create an instance.
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">if </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_Logger </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">== </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">null</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">)
    {
        </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">try
        </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">{
            </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_Logger </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">new </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(255, 255, 230);">"AppLogger"</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
        }
        </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">catch </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">LoggerInitializationException</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">)
        {
            </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_Logger </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">new </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">();
        }
    }
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// return logger
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">return </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_Logger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
}
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">private set </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">{ </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_Logger </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">value</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">; }
}</span></pre>
<p>The <strong>AppLogger</strong> constructor takes care of configuring log4net using the embedded XML files based on the build configurations.</p>

<pre class="code"><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">public </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">string </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">loggerName</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">)
{
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">try
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">{
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Initiate logger object
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">this</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Log </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">LogManager</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">GetLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">loggerName</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#if </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">DEBUG
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Create a log file in the Temp folder
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">string </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">logFilePath </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">Path</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">GetTempFileName</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">();
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Add log file path to the configurations stream
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">string </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">loggerConfigurations </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">
Resources</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Log4netReleaseConfigurations</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">loggerConfigurations </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">
loggerConfigurations</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Replace</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">_LoggerLocationSymbol</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">, </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">logFilePath</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Convert embedded configurations file to a stream
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">byte</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">[] </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">byteArray </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">
Encoding</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">ASCII</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">GetBytes</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">loggerConfigurations</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">MemoryStream </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">stream </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">new </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">MemoryStream</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">byteArray</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Configure logger from stream
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">XmlConfigurator</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Configure</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">stream</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Store log file path
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">LogFilePath </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">logFilePath</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#endif
#if </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">!DEBUG
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:gray;">// Create a log file in the Temp folder
    string logFilePath = Path.GetTempFileName();
    // Add log file path to the configurations stream
    string loggerConfigurations =
Resources.Log4netReleaseConfigurations;
    loggerConfigurations =
loggerConfigurations.Replace(AppLogger._LoggerLocationSymbol, logFilePath);
    // Convert embedded configurations file to a stream
    byte[] byteArray =
Encoding.ASCII.GetBytes(loggerConfigurations);
    MemoryStream stream = new MemoryStream(byteArray);
    // Configure logger from stream
    XmlConfigurator.Configure(stream);
    // Store log file path
    AppLogger.LogFilePath = logFilePath;
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#endif
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Supress logger errors/exceptions by default
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">this</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">SuppressErrors </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">true</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
}
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">catch </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">Exception </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">e</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">)
{
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Empty logger object
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">this</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Log </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">null</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:green;">// Throw exception
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">LoggerInitializationException </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">ex </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">
new </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">LoggerInitializationException</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(255, 255, 230);">"Logger initialization failed"</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">, </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">e</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">throw </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">e</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
}
} </span></pre>
<p>You can see that the constructor creates a file in the Temp folder (for ups and downs of this choice, read <a href="http://www.amreldib.com/2010/07/configuring-log4net-and-using-applogger.html">Part 1</a>), and modifies the XML file before configuring log4net with a stream of the file. Then it sets the <strong>LogFilePath</strong> property with a path to the log file.</p>

<p>It also uses preprocessor directives (<strong>#if DEBUG</strong>) to configure log4net differently in the debug and release configurations. You can make the code less in size by using the same configurations. This constructor happens to use the same configuration but I wanted to show that you can use different configurations.
By default, AppLogger will suppress its errors. So even if initialization failed or any other error occurs, logging will stop but you don’t have to modify your code to catch any exceptions.</p>

<p>If you want to catch logging exceptions, you can change the <strong>SuppressError</strong> property by writing:
&lt;pre class="code"&gt;<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">AppLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Logger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">SuppressErrors </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">false</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;</span>&lt;/pre&gt;AppLogger makes it easy and fast to start logging but it has its downsides as well. Calling the <strong>AppLogger.Logger</strong> static property has a performance overhead more than other properties since it checks if the logger hasn’t been created yet. If your application has one entry point (Console application, Windows application, etc.) you can move the initialization code to the entry point and get rid of the overhead.</p>

<p>Also, the configuration I’m using creates a log file with a name that is not predefined which makes it difficult to find sometimes unless you use the <strong>LogFilePath</strong> property. You can change the configurations to fit your workflow, as this fits mine.
I’ve used the AppLogger class for number of projects and it’s working fine, I hope it helps you as well.</p>

<p>Feel free to offer any suggestions or questions in the comments.
The code is offered under the Creative Commons Attribution 2.5 Canada License. You can use and modify this code, you can use it in commercial and non-commercial work. Kindly attribute this code to its original author.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/ConfiguringLog4netPart1">
        Configuring log4net and Using the AppLogger Class - Part 1
      </a>
    </h1>

    <span class="post-date">18 Jul 2010</span>

    <p>It’s been quite a while since I started using log4net for logging, and it changed how I debug applications. I found it much easier to find the source of an error by reading the log after the application crashes rather than using the step-by-step debugging in Visual Studio.</p>

<p>I started using log4net after reading an excellent tutorial by Jim Christopher on his blog <a href="http://www.beefycode.com/">BeefyCode</a>. You can find a list of all the posts in the tutorial <a href="http://www.beefycode.com/post/Log4Net-Tutorials-and-Resources.aspx">here</a>.</p>

<p>Some people prefer to log the application activities for debugging purposes only which works well in desktop applications that doesn’t have a mechanism for sending the log back to the developer in case of unexpected behavior. This has its obvious upside, which is improving the application performance by avoiding logging. To limit logging to debugging purposes only, simply surround all logging code with the conditional preprocessor directive #if.</p>

<p>For the using statements:
&lt;div class="csharpcode"&gt;
    &lt;pre class="code"&gt;<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#if </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">DEBUG
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">using </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">log4net</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;">using </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">log4net</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Config</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">;
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#endif</span>&lt;/pre&gt;</p>

<p>&lt;/div&gt;
<style type="text/css">
    .csharpcode, .csharpcode pre {
        font-size: small;
        color: black;
        font-family: consolas, "Courier New", courier, monospace;
        background-color: #ffffff;
        /*white-space: pre;*/
    }</style></p>

<pre><code>    .csharpcode pre {
        margin: 0em;
    }

    .csharpcode .rem {
        color: #008000;
    }

    .csharpcode .kwrd {
        color: #0000ff;
    }

    .csharpcode .str {
        color: #006080;
    }

    .csharpcode .op {
        color: #0000c0;
    }

    .csharpcode .preproc {
        color: #cc6633;
    }

    .csharpcode .asp {
        background-color: #ffff00;
    }

    .csharpcode .html {
        color: #800000;
    }

    .csharpcode .attr {
        color: #ff0000;
    }

    .csharpcode .alt {
        background-color: #f4f4f4;
        width: 100%;
        margin: 0em;
    }

    .csharpcode .lnum {
        color: #606060;
</code></pre>
<p>&lt;/style&gt;And for the logging code:</p>

<pre class="code"><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#if </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">DEBUG  
   </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(43, 145, 175);">ILog </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">log </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">= </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">LogManager</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">GetLogger</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(255, 255, 230);">"Logger"</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
   </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">log</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Debug</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(255, 255, 230);">"Message"</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);
</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:blue;">#endif</span></pre>
<p>There are different choices for a destination of your application’s log, Database, Console, File, System event log, Memory, E-mail, Telnet, and even <a href="http://caseywatson.com/2009/07/07/log4net-twitter-awesome/">Twitter</a> which I don’t think is very practical (no one would follow a feed that delivers only bad news).</p>

<p>Those different destinations offer different advantages and are fit for different scenarios. You can use the preprocessor directive to apply different configurations for debugging and release.</p>

<p>One obvious scenario is to use a database for debugging and a file for release. In a large development environment where different individuals work on development and testing, logging to a database offers some advantages like keeping a record of how the application behaves and easily sharing that record among different team members. With simple tools and shared procedure, this log can be linked to the issue tracking system within the organization.</p>

<p>I use a text file as a destination. It’s easy to set up and use and not so difficult to read. I also use a XML file for configurations rather than programmatically (which only few prefer). I found that the best of both worlds is to embed the configurations file in the application resources and then stream it at runtime to configure the logger using the stream.</p>

<div align="justify">
    <span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);">

        XmlConfigurator
    </span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">.</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">Configure</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">(</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;">stream</span><span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);">);</span>

</div>

<p>This helps solving one of the problems I ran into, which is configuring log4net for the release version. In the debug mode, you can easily hard code the path to the destination file and you have administrator privileges to write to any folder you like. In the release mode, you can’t really control – or predict – the environment where the logger will work. You have to plan for something safe that you know will work in any environment.</p>

<p>Writing log to the application installation folder does not work under Windows 7 (or Vista). Unless the application is running as an administrator, logging will fail. Try to use the Application Data folder or the Temp folder.</p>

<p>In the Application Data folder, you have to manage the growing number of files as the application continues to log to them but you have the advantage of being able to keep the log files (unless the user goes to the folder and delete the files, nothing will happen to them).</p>

<p>In the Temp folder, you have to avoid creating a file with a name that already exist, and your log file will probably be deleted by the next time you run the application.</p>

<p>I create a log file in the Temp folder because I don’t really need the log file beyond the current session, and to avoid creating a file with a duplicate name simply use:<span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:navy;"></span></p>

<pre><code>string &lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;"&gt;logFilePath &lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);"&gt;= &lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248); color: rgb(166, 83, 0);"&gt;Path&lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);"&gt;.&lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);color:maroon;"&gt;GetTempFileName&lt;/span&gt;&lt;span style="background: none repeat scroll 0% 0% rgb(248, 248, 248);"&gt;();&lt;/span&gt;
</code></pre>

<p>Now, I want to:</p>

<ul>
  <li>
    <p>Configure log4net using XML file.</p>
  </li>
  <li>
    <p>Determine the path to the log file at runtime.</p>
  </li>
  <li>
    <p>Avoid shipping a configuration file with the assembly (include the configuration file inside the assembly).</p>
  </li>
  <li>
    <p>Reduce the number of lines I have to write to initiate logging.To do all that, and reuse the solution across all the projects I work on, I use the AppLogger class. How use it and how it works is a topic of another post.  </p>
  </li>
</ul>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page7">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page5">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
